<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>JoFlix Advanced | Netflix Clone</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
<style>
:root{
 --red:#e50914;
 --bg:#050505;
 --glass:rgba(255,255,255,.05);
 --border:rgba(255,255,255,.12);
 --text:#fff;
 --muted:#aaa;
}
body{margin:0;padding:0;font-family:'Cairo',sans-serif;background:var(--bg);color:var(--text);overflow-x:hidden;transition:.3s}

/* NAVBAR */
nav{
 display:flex;align-items:center;justify-content:space-between;
 padding:15px 40px;
 backdrop-filter:blur(15px);
 background:rgba(0,0,0,.7);
 position:fixed;top:0;inset-inline:0;z-index:999;
}
.logo{font-size:28px;font-weight:900;color:var(--red);}
.search-box{position:relative;width:350px;}
.search-box input{
 width:100%;padding:12px 18px;border-radius:30px;
 border:none;background:#222;color:#fff;outline:none;font-size:16px;
}
#searchResults{
 position:absolute;top:110%;right:0;left:0;
 background:#111;border-radius:12px;
 max-height:350px;overflow:auto;display:none;
 box-shadow:0 10px 30px rgba(0,0,0,.7);
}
#searchResults div{
 display:flex;align-items:center;gap:10px;padding:10px;
 cursor:pointer;border-bottom:1px solid var(--border);
}
#searchResults div img{width:45px;height:65px;object-fit:cover;border-radius:6px;}
#searchResults div:hover{background:var(--glass);}

/* HERO */
.hero{
 height:70vh;
 background:
 linear-gradient(to top,#000 10%,transparent),
 url("https://image.tmdb.org/t/p/original/xDMIl84Qo5Tsu62c9DGWhmPI67A.jpg") center/cover;
 display:flex;align-items:flex-end;padding:60px;
 transition:.3s;
}
.hero h1{font-size:48px;font-weight:900}
.hero p{font-size:18px;color:#ccc;max-width:600px}

/* ROWS */
.section{margin-top:40px;}
.section h2{
 margin:0 40px 15px;display:flex;justify-content:space-between;align-items:center;
}
.view-all{font-size:14px;color:var(--muted);cursor:pointer}
.row{display:flex;gap:20px;overflow-x:auto;padding:0 40px;}
.row::-webkit-scrollbar{height:6px;}
.row::-webkit-scrollbar-thumb{background:#333;border-radius:10px}
.card{
 min-width:180px;height:270px;border-radius:16px;overflow:hidden;cursor:pointer;position:relative;
}
.card img{width:100%;height:100%;object-fit:cover;transition:.4s}
.card:hover img{transform:scale(1.1);filter:brightness(.6)}
.card::after{content:"â–¶";position:absolute;inset:0;display:flex;align-items:center;justify-content:center;font-size:50px;opacity:0;transition:.3s}
.card:hover::after{opacity:1}

/* GENRE PAGE */
.genre-page{display:none;padding:40px;}
.genre-page h2{margin-bottom:25px;}
.genre-buttons{display:flex;flex-wrap:wrap;gap:15px;margin-bottom:25px;}
.genre-buttons button{padding:12px 18px;border:none;border-radius:10px;background:var(--glass);color:#fff;cursor:pointer;transition:.3s}
.genre-buttons button:hover{background:var(--red)}
.genre-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:30px}

/* MODAL */
#modal{
 position:fixed;inset:0;background:rgba(0,0,0,.95);display:none;z-index:2000;overflow:auto;
}
.close{position:fixed;top:20px;left:30px;font-size:40px;cursor:pointer;color:#fff;z-index:2100}
.modal-box{max-width:1100px;margin:80px auto;padding:20px}
.info{display:flex;gap:30px;background:var(--glass);border:1px solid var(--border);border-radius:20px;padding:25px;}
.info img{width:220px;border-radius:12px}
.controls,.servers{display:flex;gap:12px;flex-wrap:wrap;margin:20px 0;}
.ctrl button,.srv{background:#000;color:#fff;border:1px solid var(--border);padding:10px 14px;border-radius:10px;cursor:pointer;}
.srv.active{background:var(--red)}
.player{aspect-ratio:16/9;background:#000;border-radius:20px;overflow:hidden}
iframe{width:100%;height:100%;border:0}

/* PAGINATION */
.pagination{display:flex;justify-content:center;gap:10px;margin-top:15px;}
.pagination button{padding:6px 10px;background:#111;border:none;color:#fff;border-radius:6px;cursor:pointer;}
.pagination button:hover{background:var(--red)}
.pagination button.active{background:var(--red);color:#fff}

/* MOBILE */
@media(max-width:768px){
 .hero h1{font-size:32px}
 .search-box{width:240px}
 .info{flex-direction:column;text-align:center}
 .info img{margin:auto}
}
</style>
</head>
<body>

<nav>
 <div class="logo">JoFlix</div>
 <div class="search-box">
  <input placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† ÙÙŠÙ„Ù… Ø£Ùˆ Ù…Ø³Ù„Ø³Ù„..." oninput="search(this.value)">
  <div id="searchResults"></div>
 </div>
</nav>
<div style="height:80px"></div>

<!-- HERO -->
<div class="hero">
 <div>
   <h1>Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ JoFlix</h1>
   <p>ØªØµÙØ­ Ø£Ø­Ø¯Ø« Ø§Ù„Ø£ÙÙ„Ø§Ù… ÙˆØ§Ù„Ù…Ø³Ù„Ø³Ù„Ø§Øª ÙˆØ§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ù…Ù…ÙŠØ²Ø©</p>
 </div>
</div>

<!-- HOME -->
<div id="home">

 <div class="section">
  <h2>ğŸ”¥ Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ø´Ø§Ù‡Ø¯Ø© <span class="view-all" onclick="openGenre('trending','Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ø´Ø§Ù‡Ø¯Ø©')">Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„</span></h2>
  <div class="row" id="trending"></div>
  <div class="pagination" id="pagination-trending"></div>
 </div>

 <div class="section">
  <h2>ğŸ¬ Ø£ÙƒØ´Ù† <span class="view-all" onclick="openGenre(28,'Ø£ÙƒØ´Ù†')">Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„</span></h2>
  <div class="row" id="action"></div>
  <div class="pagination" id="pagination-action"></div>
 </div>

 <div class="section">
  <h2>ğŸ•µï¸ ØºÙ…ÙˆØ¶ <span class="view-all" onclick="openGenre(9648,'ØºÙ…ÙˆØ¶')">Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„</span></h2>
  <div class="row" id="mystery"></div>
  <div class="pagination" id="pagination-mystery"></div>
 </div>

 <div class="section">
  <h2>â¤ï¸ Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠ <span class="view-all" onclick="openGenre(10749,'Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠ')">Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„</span></h2>
  <div class="row" id="romance"></div>
  <div class="pagination" id="pagination-romance"></div>
 </div>

 <div class="section">
  <h2>ğŸ¿ Ø£Ù†Ù…ÙŠ <span class="view-all" onclick="openGenre('anime','Ø£Ù†Ù…ÙŠ')">Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„</span></h2>
  <div class="row" id="anime"></div>
  <div class="pagination" id="pagination-anime"></div>
 </div>

 <div class="section">
  <h2>ğŸ”ª Ø¬Ø±ÙŠÙ…Ø© <span class="view-all" onclick="openGenre(80,'Ø¬Ø±ÙŠÙ…Ø©')">Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„</span></h2>
  <div class="row" id="crime"></div>
  <div class="pagination" id="pagination-crime"></div>
 </div>

 <div class="section">
  <h2>ğŸ­ ÙƒÙˆØ±ÙŠ <span class="view-all" onclick="openGenre('kdrama','ÙƒÙˆØ±ÙŠ')">Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„</span></h2>
  <div class="row" id="kdrama"></div>
  <div class="pagination" id="pagination-kdrama"></div>
 </div>

 <div class="section">
  <h2>ğŸ˜± ØªØ´ÙˆÙŠÙ‚ <span class="view-all" onclick="openGenre(53,'ØªØ´ÙˆÙŠÙ‚')">Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„</span></h2>
  <div class="row" id="thriller"></div>
  <div class="pagination" id="pagination-thriller"></div>
 </div>

</div>

<!-- GENRE PAGE -->
<div id="genrePage" class="genre-page">
 <h2 id="genreTitle">Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª</h2>
 <div class="genre-buttons">
  <button onclick="loadGenre(28,'Ø£ÙƒØ´Ù†')">Ø£ÙƒØ´Ù†</button>
  <button onclick="loadGenre(12,'Ù…ØºØ§Ù…Ø±Ø©')">Ù…ØºØ§Ù…Ø±Ø©</button>
  <button onclick="loadGenre(16,'ÙƒØ±ØªÙˆÙ†')">ÙƒØ±ØªÙˆÙ†</button>
  <button onclick="loadGenre(35,'ÙƒÙˆÙ…ÙŠØ¯ÙŠØ§')">ÙƒÙˆÙ…ÙŠØ¯ÙŠØ§</button>
  <button onclick="loadGenre(80,'Ø¬Ø±ÙŠÙ…Ø©')">Ø¬Ø±ÙŠÙ…Ø©</button>
  <button onclick="loadGenre(99,'ÙˆØ«Ø§Ø¦Ù‚ÙŠ')">ÙˆØ«Ø§Ø¦Ù‚ÙŠ</button>
  <button onclick="loadGenre(18,'Ø¯Ø±Ø§Ù…Ø§')">Ø¯Ø±Ø§Ù…Ø§</button>
  <button onclick="loadGenre(10751,'Ø¹Ø§Ø¦Ù„ÙŠ')">Ø¹Ø§Ø¦Ù„ÙŠ</button>
  <button onclick="loadGenre(14,'Ø®ÙŠØ§Ù„')">Ø®ÙŠØ§Ù„</button>
  <button onclick="loadGenre(9648,'ØºÙ…ÙˆØ¶')">ØºÙ…ÙˆØ¶</button>
  <button onclick="loadGenre(27,'Ø±Ø¹Ø¨')">Ø±Ø¹Ø¨</button>
  <button onclick="loadGenre(878,'Ø®ÙŠØ§Ù„ Ø¹Ù„Ù…ÙŠ')">Ø®ÙŠØ§Ù„ Ø¹Ù„Ù…ÙŠ</button>
  <button onclick="loadGenre('anime','Ø£Ù†Ù…ÙŠ')">Ø£Ù†Ù…ÙŠ</button>
  <button onclick="loadGenre(10749,'Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠ')">Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠ</button>
  <button onclick="loadGenre('kdrama','ÙƒÙˆØ±ÙŠ')">ÙƒÙˆØ±ÙŠ</button>
  <button onclick="loadGenre(53,'ØªØ´ÙˆÙŠÙ‚')">ØªØ´ÙˆÙŠÙ‚</button>
 </div>
 <div class="genre-grid" id="genreGrid"></div>
 <div class="pagination" id="pagination-genre"></div>
</div>

<!-- MODAL -->
<div id="modal">
 <div class="close" onclick="closeM()">Ã—</div>
 <div class="modal-box">
   <div class="info">
     <img id="pPoster">
     <div>
       <h1 id="pTitle"></h1>
       <div id="pMeta"></div>
       <p id="pDesc"></p>
     </div>
   </div>

   <div id="tvControls" class="controls" style="display:none">
     Ø§Ù„Ù…ÙˆØ³Ù…
     <button onclick="chgS(-1)">-</button><span id="sVal">1</span>
     <button onclick="chgS(1)">+</button>
     Ø§Ù„Ø­Ù„Ù‚Ø©
     <button onclick="chgE(-1)">-</button><span id="eVal">1</span>
     <button onclick="chgE(1)">+</button>
   </div>

   <div class="servers">
     <div class="srv active" data-s="vidsrc">VIDSRC.TO</div>
     <div class="srv" data-s="vidsrcme">VIDSRC.ME</div>
     <div class="srv" data-s="vidsrcxyz">VIDSRC.XYZ</div>
     <div class="srv" data-s="embedsu">EMBED.SU</div>
     <div class="srv" data-s="multi">MULTI</div>
   </div>

   <div class="player" id="playerBox"></div>
 </div>
</div>

<script>
const KEY="8341de77e3a24593226752d83720f88b";
const img=p=>`https://image.tmdb.org/t/p/w500${p}`;
let cur={};

/* LOAD ROW WITH PAGINATION */
async function loadRow(url,el,paginationId,page=1){
 const r=await fetch(url+`&page=${page}`);
 const d=await r.json();
 const totalPages=d.total_pages;
 el.innerHTML=d.results.filter(x=>x.poster_path).map(m=>`
  <div class="card" onclick="openM(${m.id},'${m.media_type||'movie'}')">
   <img src="${img(m.poster_path)}">
  </div>
 `).join('');

 const pagination = document.getElementById(paginationId);
 pagination.innerHTML='';
 for(let i=1;i<=Math.min(totalPages,5);i++){
   const btn=document.createElement('button');
   btn.innerText=i;
   if(i===page) btn.classList.add('active');
   btn.onclick=()=>loadRow(url,el,paginationId,i);
   pagination.appendChild(btn);
 }
}

/* HOME LISTS */
loadRow(`https://api.themoviedb.org/3/trending/all/day?api_key=${KEY}&language=ar` ,trending,'pagination-trending');
loadRow(`https://api.themoviedb.org/3/discover/movie?api_key=${KEY}&with_genres=28`,action,'pagination-action');
loadRow(`https://api.themoviedb.org/3/discover/movie?api_key=${KEY}&with_genres=9648`,mystery,'pagination-mystery');
loadRow(`https://api.themoviedb.org/3/discover/movie?api_key=${KEY}&with_genres=10749`,romance,'pagination-romance');
loadRow(`https://api.themoviedb.org/3/discover/tv?api_key=${KEY}&with_keywords=210024`,anime,'pagination-anime'); // Ø£Ù†Ù…ÙŠ
loadRow(`https://api.themoviedb.org/3/discover/movie?api_key=${KEY}&with_genres=80`,crime,'pagination-crime');
loadRow(`https://api.themoviedb.org/3/discover/tv?api_key=${KEY}&with_keywords=211101`,kdrama,'pagination-kdrama'); // ÙƒÙˆØ±ÙŠ
loadRow(`https://api.themoviedb.org/3/discover/movie?api_key=${KEY}&with_genres=53`,thriller,'pagination-thriller');

/* SEARCH */
async function search(q){
 if(q.length<2){searchResults.style.display='none';return;}
 const r=await fetch(`https://api.themoviedb.org/3/search/multi?api_key=${KEY}&query=${q}&language=ar`);
 const d=await r.json();
 searchResults.innerHTML=d.results.slice(0,8).map(x=>`
  <div onclick="openM(${x.id},'${x.media_type}')">
   <img src="${img(x.poster_path)}">
   <span style="font-size:14px;">${x.title||x.name} â€¢ ${x.media_type}</span>
  </div>
 `).join('');
 searchResults.style.display='block';
}

/* LOAD GENRE */
async function loadGenre(id,title,page=1){
 home.style.display='none';
 genrePage.style.display='block';
 genreTitle.innerText=title;
 let url;
 if(id==="anime") url=`https://api.themoviedb.org/3/discover/tv?api_key=${KEY}&with_keywords=210024&page=${page}`;
 else if(id==="kdrama") url=`https://api.themoviedb.org/3/discover/tv?api_key=${KEY}&with_keywords=211101&page=${page}`;
 else if(id==="trending") url=`https://api.themoviedb.org/3/trending/all/day?api_key=${KEY}&language=ar&page=${page}`;
 else url=`https://api.themoviedb.org/3/discover/movie?api_key=${KEY}&with_genres=${id}&page=${page}`;
 const r=await fetch(url);
 const d=await r.json();
 genreGrid.innerHTML=d.results.filter(x=>x.poster_path).map(m=>`
  <div class="card" onclick="openM(${m.id},'${m.media_type||'movie'}')">
   <img src="${img(m.poster_path)}">
  </div>`).join('');

 const pagination = document.getElementById('pagination-genre');
 pagination.innerHTML='';
 for(let i=1;i<=Math.min(d.total_pages,5);i++){
   const btn=document.createElement('button');
   btn.innerText=i;
   if(i===page) btn.classList.add('active');
   btn.onclick=()=>loadGenre(id,title,i);
   pagination.appendChild(btn);
 }
}

/* MODAL PLAYER */
async function openM(id,type){
 cur={id,type,s:1,e:1,srv:"vidsrc"};
 const r=await fetch(`https://api.themoviedb.org/3/${type}/${id}?api_key=${KEY}&language=ar`);
 const d=await r.json();
 pPoster.src=img(d.poster_path);
 pTitle.innerText=d.title||d.name;
 pDesc.innerText=d.overview||"Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ";
 pMeta.innerText=`â­ ${d.vote_average.toFixed(1)} â€¢ ${(d.release_date||d.first_air_date||"").split("-")[0]}`;
 tvControls.style.display=type==="tv"?"flex":"none";
 modal.style.display="block";loadPlayer();
}
function loadPlayer(){
 const s=cur.s,e=cur.e;
 const urls={
  vidsrc:`https://vidsrc.to/embed/${cur.type}/${cur.id}${cur.type==="tv"?`/${s}/${e}`:""}`,
  vidsrcme:`https://vidsrc.me/embed/${cur.type}?tmdb=${cur.id}&season=${s}&episode=${e}`,
  vidsrcxyz:`https://vidsrc.xyz/embed/${cur.type}/${cur.id}`,
  embedsu:`https://embed.su/embed/${cur.type}/${cur.id}${cur.type==="tv"?`/${s}/${e}`:""}`,
  multi:`https://multiembed.mov/?video_id=${cur.id}&tmdb=1&s=${s}&e=${e}`
 };  
playerBox.innerHTML=`<iframe src="${urls[cur.srv]}" allowfullscreen></iframe>`;
}
document.querySelectorAll(".srv").forEach(b=>{
 b.onclick=()=>{document.querySelectorAll(".srv").forEach(x=>x.classList.remove("active"));
 b.classList.add("active");cur.srv=b.dataset.s;loadPlayer();}
});
function chgS(v){cur.s=Math.max(1,cur.s+v);sVal.innerText=cur.s;loadPlayer();}
function chgE(v){cur.e=Math.max(1,cur.e+v);eVal.innerText=cur.e;loadPlayer();}
function closeM(){modal.style.display="none";playerBox.innerHTML="";}
</script>

</body>
</html>
